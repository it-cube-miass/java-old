# 4. Переменные и константы

Мы уже использовали переменные в наших примерах, поскольку без них было бы очень затруднительно объяснять примитивные типы данных в Java, но не акцентировали на этом внимания, так как это не большая и не сложная тема. О константах в Java мы вообще пока не говорили. И вот настало время.

Переменная — основной компонент хранения данных в Java-программе. Переменная определяется комбинацией идентификатора, типа и необязательного начального значения. Кроме того, все переменные имеют область определения, которая задает их видимость для других компонентов и время существования.

В Java все переменные должны быть объявлены до их использования. Объявить переменную можно в любом месте программы. Основная форма объявления переменных выглядит следующим образом:

```text
тип идентификатор [= значение][, идентификатор [= значение] ...] ;
```

* тип — это один из элементарных типов Java либо имя класса или интерфейса.  
* идентификатор — это имя переменной

Переменной можно присвоить начальное значение \(инициализировать ее\), указывая знак равенства и значение. Следует помнить, что выражение инициализации должно возвращать значение того же \(или совместимого\) типа, который указан для переменной. Для объявления более одной переменной указанного типа можно использовать список с разделителями-запятыми.

Несколько примеров объявления переменных различных типов. Обратите внимание, что некоторые объявления осуществляют инициализацию переменных.

```java
int a, b, c; // объявление трех переменных типа int

int d = 3, f = 5;// объявление еще двух переменных типа int с инициализацией

byte z = 22; // объявление и инициализация переменной z

double pi = 3.14159;// объявление и инициализация переменной pi
```

Использовать неинициализированную переменную в выражениях нельзя, поэтому переменную надо инициализировать либо при ее объявлении, либо до ее использования в каком либо выражении. Например, приведенный ниже фрагмент кода будет признан ошибочным уже на этапе компиляции.

```java
int vacationDays;
System.out.println(vacationDays); // ОШИБКА! Переменная не инициализирована
```

## Динамическая инициализация переменных

Java допускает динамическую инициализацию переменных посредством любого выражения, допустимого в момент объявления переменной. Например:

```java
double a = 3.0, b = 4.0;
// динамическая инициализация переменной c
double c = Math.sqrt(a * a + b * b);
System.out.println("Гипотенуза равна " + c);
```

## Область действия и время существования переменных

Это достаточно важный вопрос и его надо рассмотреть поподробнее. И для этого сперва надо рассмотреть использование блоков кода в Java.

### Использование блоков кода

Java позволяет группировать выражения в блоки кода. Это выполняется путем помещения выражений в фигурные скобки. Сразу после создания блок кода становится логическим модулем, который можно использовать в тех же местах, что и отдельный оператор. Например, блок может служить в качестве цели для операторов _if_ и _for_. Рассмотрим следующий оператор _if_:

```java
if (x < y) { // начало блока
  x = y;
  y = 0;
} // конец блока
```

В этом примере, если x меньше y, программа выполнит оба выражения, расположенные внутри блока. Таким образом, оба выражения внутри блока образуют логический модуль, и выполнение одного выражения невозможно без одновременного выполнения и второго. Основная идея этого подхода состоит в том, что во всех случаях, когда требуется логически связать два или более выражения, это делается посредством создания блока.

Java допускает объявление переменных внутри любого блока. Блок начинается открывающей фигурной скобкой и завершается закрывающей фигурной скобкой. Блок задает область определения. Таким образом, при открытии каждого нового блока мы создаем новую область действия. Область действия задает то, какие объекты видимы другим частям программы. Она определяет также время существования этих объектов.

Основное правило, которое следует запомнить: переменные, объявленные внутри области действия, не видны \(т.е. недоступны\) коду, который находится за пределами этой области. Таким образом, объявление переменной внутри области действия ведет к ее локализации и защите от изменений.

Области действия могут быть вложенными. Например, при каждом создании блока кода мы создаем новую, вложенную область действия. В этих случаях внешняя область действия заключает в себя внутреннюю область. Это означает, что объекты, объявленные во внешней области, будут видны коду, определенному во внутренней области. Тем не менее, обратное не верно. Объекты, которые объявлены во внутренней области действия, не будут видны за ее пределами. Это может пояснить следующий пример:

```java
{ // доступен только x
  int x = 5;

  { // доступны x и y
    int y = 7;
    y += x;
  }

  ++y; // вызовет ошибку, y тут недоступен
  ++x; // все ок, x тут доступен
}
```

Следует запомнить один важный нюанс: переменные создаются при входе в их область действия и уничтожаются при выходе из нее. Это означает, что переменная утратит свое значение сразу по выходу из области действия.

```java

```

Когда блоки вложенны, во внутреннем блоке нельзя объявлять переменные с тем же именем, что и во внешней области, выдаст ошибку компиляции.

```java
{
  int x = 5;

  {
    int x = 7; // Ошибка! Dublicate local variable
  }
}
```

## Константы в Java

В Java для обозначения констант служит ключевое слово _final_. Ключевое слово _final_ означает, что присвоить данной переменной какое-нибудь значение можно лишь один раз, после чего изменить его уже нельзя. Рекомендуется использовать для именования констант прописные буквы, хоть это и не является обязательным, но такой стиль способствует удобочитаемости кода. Пример объявления константы:

```java
final double CM_PER_INCH = 2.54;
```

Константу можно и не инициализировать при ее объявлении, но необходимо инициализировать до ее использования в каком-либо выражении, точно так же как и переменную, но сделать это можно только один раз. Причем это можно сделать и в условных операторах, то есть инициализировать значение константы в зависимости от каких либо условий. Компилятор проверит все возможные варианты, и если будет хоть один, где константа может быт не инициализирована, то он выдаст ошибку.

